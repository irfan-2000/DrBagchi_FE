<div class="min-h-screen bg-gray-50 py-16 px-4">

  <div class="max-w-5xl mx-auto bg-white border border-gray-200 rounded-lg p-8 md:p-12">

    <!-- Heading -->
    <div class="text-center mb-12">
      <h2 class="text-3xl font-bold text-gray-900">
        Create Your Student Account
      </h2>
      <p class="text-gray-600 mt-3 text-sm">
        Fill in the details below to get started.
      </p>
    </div>

    <form [formGroup]="signupForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">

      <!-- ================= Student Details ================= -->
      <div class="md:col-span-2 border-b border-gray-200 pb-3 mb-4">
        <h3 class="text-lg font-semibold text-gray-900">Student Details</h3>
      </div>

      <!-- Full Name -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
        <input type="text" formControlName="fullName"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
        <span class="text-xs text-red-600" *ngIf="errorMessages['fullName']">
          {{ errorMessages['fullName'] }}
        </span>
      </div>

      <!-- Email -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
        <input type="email" formControlName="email"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
        <span class="text-xs text-red-600" *ngIf="errorMessages['email']">
          {{ errorMessages['email'] }}
        </span>
      </div>

      <!-- Mobile -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Mobile Number</label>
        <input type="tel" maxlength="10" formControlName="mobile"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
        <span class="text-xs text-red-600" *ngIf="errorMessages['mobile']">
          {{ errorMessages['mobile'] }}
        </span>
      </div>

      <!-- Gender -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Gender</label>
        <select formControlName="gender"
                class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
          <option value="">Select</option>
          <option value="M">Male</option>
          <option value="F">Female</option>
          <option value="O">Other</option>
        </select>
        <span class="text-xs text-red-600" *ngIf="errorMessages['gender']">
          {{ errorMessages['gender'] }}
        </span>
      </div>

      <!-- DOB -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth</label>
        <input type="date" formControlName="dob"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
        <span class="text-xs text-red-600" *ngIf="errorMessages['dob']">
          {{ errorMessages['dob'] }}
        </span>
      </div>

      <!-- Caste -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Caste</label>
        <select formControlName="caste"
                class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
          <option value="">Select Caste</option>
          <option *ngFor="let c of castes" [value]="c">{{ c }}</option>
        </select>
        <span class="text-xs text-red-600" *ngIf="errorMessages['caste']">
          {{ errorMessages['caste'] }}
        </span>
      </div>

      <!-- Profile Picture -->
      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-3">Profile Picture</label>
        <div class="flex items-center gap-6">
          <div class="relative w-32 h-32">
            <input type="file" id="profileImage"
                   formControlName="profileImage"
                   (change)="onFileChange($event)"
                   class="hidden">
            <label for="profileImage" class="cursor-pointer">
              <img [src]="profileImagePreview"
                   class="w-32 h-32 rounded-full object-cover border border-gray-300">
            </label>
          </div>
        </div>
        <span class="text-xs text-red-600" *ngIf="errorMessages['profileImage']">
          {{ errorMessages['profileImage'] }}
        </span>
      </div>

      <!-- Parent Name -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Parent/Guardian Name</label>
        <input type="text" formControlName="parentName"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
        <span class="text-xs text-red-600" *ngIf="errorMessages['parentName']">
          {{ errorMessages['parentName'] }}
        </span>
      </div>

      <!-- Parent Mobile -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Parent/Guardian Mobile</label>
        <input type="tel" maxlength="10" formControlName="parentMobile"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
        <span class="text-xs text-red-600" *ngIf="errorMessages['parentMobile']">
          {{ errorMessages['parentMobile'] }}
        </span>
      </div>

      <!-- Address -->
      <div class="md:col-span-2">
        <label class="block text-sm font-medium text-gray-700 mb-2">Street Address</label>
        <input type="text" formControlName="address"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
        <span class="text-xs text-red-600" *ngIf="errorMessages['address']">
          {{ errorMessages['address'] }}
        </span>
      </div>

      <!-- City -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">City</label>
        <input type="text" formControlName="city"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
        <span class="text-xs text-red-600" *ngIf="errorMessages['city']">
          {{ errorMessages['city'] }}
        </span>
      </div>

      <!-- State -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">State</label>
        <select formControlName="state"
                class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
          <option value="">Select</option>
          <option *ngFor="let state of states" [value]="state">{{ state }}</option>
        </select>
        <span class="text-xs text-red-600" *ngIf="errorMessages['state']">
          {{ errorMessages['state'] }}
        </span>
      </div>

      <!-- Pincode -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Pincode</label>
        <input type="text" maxlength="6" formControlName="pincode"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
        <span class="text-xs text-red-600" *ngIf="errorMessages['pincode']">
          {{ errorMessages['pincode'] }}
        </span>
      </div>

      <!-- ================= Institution Details ================= -->
      <div class="md:col-span-2 border-b border-gray-200 pb-3 mt-8">
        <h3 class="text-lg font-semibold text-gray-900">Institution Details</h3>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Institution</label>
        <input type="text" formControlName="institution"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Board</label>
        <select formControlName="board"
                (click)="getAvailableBatches()"
                class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
          <option value="">Select Board</option>
          <option *ngFor="let b of availableBoards" [value]="b.BoardId">
            {{ b.BoardName }}
          </option>
        </select>
      </div>

      <!-- ================= Course Details ================= -->
      <div class="md:col-span-2 border-b border-gray-200 pb-3 mt-8">
        <h3 class="text-lg font-semibold text-gray-900">Course Details</h3>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Class</label>
        <select formControlName="class"
                (change)="getAvailableSubjects($event)"
                class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
          <option value="">Select</option>
          <option *ngFor="let c of availableClasses" [value]="c.ClassId">
            {{ c.ClassName }}
          </option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Subject</label>
        <select formControlName="subject"
                class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
          <option value="">Select</option>
          <option *ngFor="let sub of availableSubjects" [value]="sub.SubjectId">
            {{ sub.SubjectName }}
          </option>
        </select>
      </div>

      <!-- ================= Login Details ================= -->
      <div class="md:col-span-2 border-b border-gray-200 pb-3 mt-8">
        <h3 class="text-lg font-semibold text-gray-900">Login Details</h3>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
        <input type="password" formControlName="password"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Confirm Password</label>
        <input type="password" formControlName="confirmPassword"
               class="w-full border border-gray-300 rounded-md px-4 py-2 text-sm focus:ring-2 focus:ring-purple-600 focus:border-purple-600 outline-none transition">
      </div>

      <!-- Terms -->
      <div class="md:col-span-2 mt-6">
        <div class="flex items-center">
          <input type="checkbox" formControlName="terms" class="mr-2">
          <label class="text-sm text-gray-600">
            I agree to the
            <a href="#" class="text-purple-700 hover:underline font-medium">
              Terms & Conditions
            </a>
          </label>
        </div>
      </div>

      <!-- Submit -->
      <div class="md:col-span-2 text-center mt-8">
        <span class="text-sm text-red-600 block mb-3" *ngIf="errorMessages['form']">
          {{ errorMessages['form'] }}
        </span>

        <button type="submit"
                (click)="SubmitSignUp()"
                class="w-full md:w-2/3 bg-purple-700 text-white py-3 rounded-md font-semibold hover:bg-purple-800 transition duration-200">
          Sign Up
        </button>

        <p class="text-sm text-gray-600 mt-4">
          Already have an account?
          <a routerLink="/login"
             class="text-purple-700 font-semibold hover:underline ml-1">
            Login
          </a>
        </p>
      </div>

    </form>

  </div>
</div>
