<div class="quiz-container">
  <div class="status left">Violations: <span id="violations">0</span></div>
  <div class="status right" id="securityStatus">SECURE MODE</div>

  <h1 class="title">Ultra-Secure Quiz System</h1>
  <p class="subtitle">This quiz runs in an enhanced secured environment.</p>

  <!-- Start Screen -->
  <div id="startScreen" *ngIf="!quizActive">
    <h2>Security Protocol Active</h2>
    <p>This quiz requires fullscreen and anti-cheating mode.</p>

    <ul class="rules">
      <li>Fullscreen required</li>
      <li>Tab switching disabled</li>
      <li>Right-click blocked</li>
      <li>Clipboard & DevTools locked</li>
    </ul>

    <p class="warning">⚠ Violations will auto-submit the quiz!</p>
    <button id="startQuizBtn" (click)="startQuiz()">Start Secure Quiz</button>
  </div>

  <!-- Quiz Section -->
 <!-- Quiz Overlay -->
<div *ngIf="quizActive" class="fixed inset-0 z-50 flex justify-center bg-black bg-opacity-30 backdrop-blur-sm p-4">
  <div class="w-full max-w-4xl bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-6 overflow-y-auto max-h-[90vh] animate-fadeIn relative">

    <!-- Sticky Timer -->
    <div class="sticky top-0 z-10 bg-white dark:bg-gray-900 py-2 px-4 rounded-t-2xl shadow-md flex justify-between items-center mb-4">
      <h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Quiz Timer</h2>
      <div class="px-4 py-2 bg-green-100 text-green-800 font-semibold rounded-lg shadow-sm">
        ⏰ {{ timerDisplay }}
      </div>
    </div>

    <!-- Quiz Form -->
    <form>
      <div *ngFor="let q of questions; let i = index" class="question-card mb-6 p-5 border border-gray-200 dark:border-gray-700 rounded-2xl shadow hover:shadow-lg transition duration-200">
        
        <!-- Question Title -->
        <p class="text-lg md:text-xl font-semibold mb-3 text-gray-800 dark:text-gray-100">
          {{ i + 1 }}. {{ q.text }}
        </p>

        <!-- Question Image -->
        <img *ngIf="q.image" [src]="q.image" alt="question-image" 
             class="rounded-xl mb-4 w-full max-h-64 object-contain shadow-sm border border-gray-100 dark:border-gray-700" />

        <!-- Options -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-2">
          <label *ngFor="let opt of q.options"
                 class="flex items-center p-3 rounded-xl cursor-pointer transition hover:bg-indigo-50 dark:hover:bg-gray-800 border border-gray-200 dark:border-gray-700"
                [ngClass]="{'bg-green-100 border-green-500': isCorrect(opt, q)}">     
            <input type="radio" 
                   [name]="'q'+q.id" 
                   [value]="opt" 
                   (change)="selectAnswer(q.id, opt)" 
                   class="mr-2 accent-indigo-600" />
            <span class="text-gray-800 dark:text-gray-100">{{ opt }}</span>
          </label>
        </div>

      </div>

      <!-- Submit Button -->
      <div class="flex justify-center mt-8">
        <button type="button"
                (click)="submitQuiz()"
                class="px-8 py-3 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition font-semibold text-lg">
          Submit  Quiz
        </button>
      </div>
    </form>

  </div>
</div>


</div>
