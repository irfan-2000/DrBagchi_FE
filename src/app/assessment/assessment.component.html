<div
  class="min-h-screen w-full bg-gradient-to-br from-slate-100 via-white to-sky-100
         text-slate-800 flex flex-col items-center px-3 sm:px-4 py-6 sm:py-10">

  <!-- STATUS BAR -->
  <div class="w-full max-w-5xl flex justify-center mb-4">
    <div
      class="w-full flex flex-wrap items-center justify-between gap-3
             rounded-2xl border border-sky-300 bg-white/80
             backdrop-blur-xl px-4 sm:px-6 py-3 shadow-md">
      <div class="flex items-center gap-2 text-sm">
        <span class="inline-flex h-2 w-2 rounded-full bg-emerald-500 animate-pulse"></span>
        <span class="font-semibold tracking-[0.2em] uppercase text-[11px] text-sky-700">
          Violations
        </span>
        <span class="text-base font-bold text-emerald-600" id="violations">0</span>
      </div>

      <div
        id="securityStatus"
        class="inline-flex items-center gap-2 rounded-full border border-emerald-400
               bg-emerald-100 px-3 sm:px-4 py-1.5 text-[11px] sm:text-xs font-semibold
               tracking-[0.25em] text-emerald-700 uppercase shadow-sm">
        <span class="h-1.5 w-1.5 rounded-full bg-emerald-600 animate-ping"></span>
        <span>Secure Mode</span>
      </div>
    </div>
  </div>

  <!-- TITLE -->
  <div class="w-full max-w-5xl text-center mb-5">
    <h1 class="text-2xl sm:text-3xl font-bold text-sky-800">
      Ultra-Secure Quiz System
    </h1>
    <p class="mt-1 text-sm sm:text-base text-slate-600">
      Runs inside enhanced secure exam environment.
      <button id="startQuizBtn" (click)="startQuiz()" class="ml-2 text-sky-700 underline">
        Start Secure Quiz
      </button>
    </p>
  </div>

  <!-- START SCREEN -->
  <div
    id="startScreen"
    *ngIf="!quizActive"
    class="w-full max-w-xl bg-white border border-slate-300 rounded-3xl
           shadow-xl backdrop-blur-xl px-6 sm:px-8 py-8 space-y-6 mx-auto">

    <h2 class="text-center text-xl font-semibold text-sky-800">Security Protocol Active</h2>

    <ul class="text-slate-700 space-y-1 text-sm">
      <li>• Fullscreen required</li>
      <li>• Tab switching disabled</li>
      <li>• Right-click blocked</li>
      <li>• Clipboard & DevTools restricted</li>
      <li class="text-red-600">⚠ Violations will auto-submit the quiz!</li>
    </ul>

    <div class="text-center mt-6">
      <button
        (click)="startQuiz()"
        class="px-8 py-3 rounded-full bg-sky-600 text-white font-semibold shadow-md">
        Start Secure Quiz
      </button>
    </div>
  </div>

  <!-- ACTIVE QUIZ -->
<div
  *ngIf="quizActive"
  class="fixed inset-0 z-50 flex flex-col bg-slate-950/90 backdrop-blur-xl">

  <!-- TOP BAR -->
  <header class="w-full flex justify-center border-b border-slate-800 bg-slate-950/95">
    <div class="w-full max-w-6xl flex items-center justify-between px-4 md:px-6 py-3">
      <div>
        <p class="text-[10px] sm:text-xs uppercase tracking-[0.3em] text-sky-400">
          JEE Advanced Practice
        </p>
        <p class="text-sm text-slate-200 mt-1">
          Ultra-Secure Mode Enabled
        </p>
      </div>

      <div
        class="px-4 py-2 rounded-full bg-emerald-500/10 border border-emerald-400/40
               text-xs sm:text-sm font-medium text-emerald-200 shadow flex items-center gap-2">
        <span class="text-lg">⏱</span>
        <span>Time Left: {{ timerDisplay }}</span>
      </div>
    </div>
  </header>

  <!-- MAIN CONTENT (FIXED SCROLL!) -->
  <main class="flex-1 min-h-0 overflow-y-auto flex justify-center bg-slate-950/80">
    <section class="w-full max-w-6xl px-4 sm:px-6 py-6 space-y-10">

      <form>

        <!-- QUESTIONS LIST -->
        <!-- QUESTIONS LIST -->
<article
  *ngFor="let q of questions; index as i"
  class="w-full bg-slate-900/90 rounded-2xl shadow-xl mb-10">

  <!-- HEADER -->
  <header class="px-5 py-4 bg-slate-950/90 border-b border-slate-800">
    <p class="text-lg sm:text-xl font-semibold text-slate-100">
      Q{{ i + 1 }}. {{ q.QuestionText }}
    </p>
  </header>

  <!-- BODY -->
  <div class="px-5 py-6 space-y-6">

    <!-- IMAGES CLEAN — NO BORDER -->
    <div
      *ngIf="q.ImagePaths?.length"
      class="w-full flex justify-center">

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl w-full">
        <div
          *ngFor="let img of q.ImagePaths"
          class="w-full bg-white rounded-xl overflow-hidden p-4 shadow-md">

          <img [src]="img" class="w-full h-full object-contain" />
        </div>
      </div>
    </div>

    <!-- MCQ -->
    <div *ngIf="q.QuestionType === 'MCQ'" class="space-y-3">
      <label
        *ngFor="let opt of q.uiOptions"
        class="flex items-start gap-3 px-4 py-3 rounded-xl
               border border-slate-700 bg-slate-900/70 cursor-pointer select-none">

        <input
          type="radio"
          [name]="'q' + q.QuestionId"
          [value]="opt.key"
          [(ngModel)]="q.selectedAnswer"
          [ngModelOptions]="{standalone: true}"
          class="h-5 w-5 text-sky-400 bg-slate-900 border-slate-600" />

        <span class="text-slate-100 text-base">{{ opt.text }}</span>
      </label>
    </div>

    <!-- MSQ -->
    <div *ngIf="q.QuestionType === 'MSQ'" class="space-y-3">
      <label
        *ngFor="let opt of q.uiOptions"
        class="flex items-start gap-3 px-4 py-3 rounded-xl
               border border-slate-700 bg-slate-900/70 cursor-pointer select-none">

        <input
          type="checkbox"
          [checked]="q.selectedAnswer.includes(opt.key)"
          (change)="toggleMSQ(q, opt.key)"
          class="h-5 w-5 text-sky-400 bg-slate-900 border-slate-600" />

        <span class="text-slate-100 text-base">{{ opt.text }}</span>
      </label>
    </div>

    <!-- NUM -->
    <div *ngIf="q.QuestionType === 'NUM'">
      <input
        type="text"
        [(ngModel)]="q.selectedAnswer"
        [ngModelOptions]="{standalone: true}"
        class="w-full px-5 py-4 text-base rounded-xl border border-sky-400/60
               bg-slate-900/80 text-slate-100 focus:ring-2 focus:ring-sky-400"
        placeholder="Enter numerical answer" />
    </div>

  </div>

</article>
  

        <!-- SUBMIT BUTTON -->
        <div class="flex justify-center pt-6 pb-10">
          <button
            (click)="submitQuiz()"
            type="button"
            class="px-12 py-3 rounded-full bg-violet-600 text-white font-semibold
                   shadow-lg shadow-violet-500/40">
            Submit Quiz
          </button>
        </div>

      </form>

    </section>
  </main>

  <!-- IMAGE ZOOM -->
  <div
    *ngIf="activeImage"
    class="fixed inset-0 z-[60] bg-black/80 backdrop-blur-md flex items-center justify-center p-4">
    <div class="relative max-w-5xl w-full">
      <button
        type="button"
        (click)="activeImage = null"
        class="absolute top-3 right-3 bg-black/70 text-white h-9 w-9 rounded-full
               flex items-center justify-center text-xl">
        ✕
      </button>

      <div class="bg-slate-900 rounded-2xl border border-slate-700 overflow-hidden">
        <img [src]="activeImage" class="w-full h-full object-contain p-4" />
      </div>
    </div>
  </div>

</div>

</div>
