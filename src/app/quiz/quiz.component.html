<div class="max-w-4xl  px-4 py-8 space-y-8">

  <!-- Ongoing Quizzes: Compact Card Grid Layout -->
  <h2 class="text-2xl font-bold text-indigo-900 mb-4">Ongoing Quizzes</h2>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10">
    <div *ngFor="let quiz of ongoingQuizzes"
         class="bg-white rounded-xl shadow p-4 flex flex-col justify-between h-48">
      <div class="flex-1">
        <h3 class="font-semibold text-indigo-800 text-sm mb-1">{{quiz.title}}</h3>
        <p class="text-xs text-gray-600 mb-1">{{quiz.subject}} • Batch: {{quiz.batch}}</p>
        <p class="text-xs text-gray-500 mb-1">Start: {{ISTString(quiz.startTime)}}</p>
        <p class="text-xs text-gray-500 mb-2">End: {{ISTString(quiz.endTime)}}</p>
        <span class="inline-block px-2 py-1 rounded-full text-xs font-semibold"
              [ngClass]="{
                'bg-red-100 text-red-800': quiz.status === 'Live',
                'bg-yellow-100 text-yellow-700': quiz.status === 'Active'
              }">
          {{quiz.status}}
        </span>
      </div>
      <button (click)="attendQuiz(quiz)"
              class="w-full mt-3 px-4 py-2 rounded-lg bg-indigo-600 text-white font-bold text-sm hover:bg-indigo-700 transition shadow">
        Attend
      </button>
    </div>
  </div>

  <!-- Upcoming Quizzes: Compact Card Grid Layout -->
  <h2 class="text-xl font-bold text-indigo-900 mb-4">Upcoming Quizzes</h2>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10">
    <div *ngFor="let quiz of upcomingQuizzes"
         class="bg-white rounded-xl border p-4 flex flex-col justify-between h-40">
      <div class="flex-1">
        <h3 class="font-semibold text-gray-800 text-sm mb-1">{{quiz.title}}</h3>
        <p class="text-xs text-gray-600 mb-1">{{quiz.subject}} • Batch: {{quiz.batch}}</p>
        <p class="text-xs text-gray-500 mb-2">Scheduled: {{ISTString(quiz.scheduledTime)}}</p>
      </div>
      <div class="flex justify-between items-center mt-2">
        <span class="px-2 py-1 rounded text-xs font-semibold bg-yellow-100 text-yellow-700">{{quiz.status}}</span>
      </div>
    </div>
  </div>

  <!-- Quiz History as Table -->
  <h2 class="text-xl font-bold text-indigo-900 mb-4">Quiz History</h2>
  <div class="overflow-x-auto rounded-xl shadow bg-white">
    <table class="min-w-full text-left border-collapse">
      <thead class="bg-indigo-100">
        <tr>
          <th class="py-3 px-4 font-semibold text-gray-900">Title</th>
          <th class="py-3 px-4 font-semibold text-gray-900">Subject</th>
          <th class="py-3 px-4 font-semibold text-gray-900">Batch</th>
          <th class="py-3 px-4 font-semibold text-gray-900">Date</th>
          <th class="py-3 px-4 font-semibold text-gray-900">Status</th>
          <th class="py-3 px-4 font-semibold text-gray-900">Score</th>
          <th class="py-3 px-4 font-semibold text-gray-900">Result</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let quiz of pastQuizzes" class="border-b hover:bg-gray-50">
          <td class="py-3 px-4 whitespace-nowrap">{{quiz.title}}</td>
          <td class="py-3 px-4 whitespace-nowrap">{{quiz.subject}}</td>
          <td class="py-3 px-4 whitespace-nowrap">{{quiz.batch}}</td>
          <td class="py-3 px-4 whitespace-nowrap">{{ISTString(quiz.date)}}</td>
          <td class="py-3 px-4">
            <span *ngIf="quiz.status==='Attended'" class="px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium">Attended</span>
            <span *ngIf="quiz.status==='Missed'" class="px-2 py-1 rounded bg-red-100 text-red-800 text-xs font-medium">Missed</span>
          </td>
          <td class="py-3 px-4 text-indigo-900 font-bold">{{quiz.score!=='-' ? quiz.score : ''}}</td>
          <td class="py-3 px-4">
            <a *ngIf="quiz.link" [href]="quiz.link" class="text-blue-700 underline text-xs font-medium" target="_blank">View</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Instructions Modal -->
  <div *ngIf="showInstructionsModal"
       class="fixed inset-0 bg-black bg-opacity-40 z-50 flex items-center justify-center">
    <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-6 relative">
      <button (click)="closeModal()"
              class="absolute top-3 right-3 text-gray-500 hover:text-indigo-700 text-xl">&times;</button>
      <h2 class="text-lg font-bold text-indigo-900 mb-2">Quiz Instructions</h2>
      <div class="mb-2"><span class="font-semibold">Title:</span> {{selectedQuiz?.title}}</div>
      <div class="mb-2"><span class="font-semibold">Duration:</span> {{selectedQuiz?.durationMinutes}} min</div>
      <div class="mb-2"><span class="font-semibold">Questions:</span> {{selectedQuiz?.numberOfQuestions}}</div>
      <div class="mb-2"><span class="font-semibold">Marking:</span> {{selectedQuiz?.markingScheme}}</div>
      <ul class="list-disc list-inside space-y-1 text-sm text-gray-700 mb-2">
        <li *ngFor="let i of selectedQuiz?.instructions">{{i}}</li>
      </ul>
      <button (click)="startQuiz(selectedQuiz?.id)"
              class="w-full mt-3 py-2 rounded-lg bg-green-600 text-white font-bold hover:bg-green-700 transition">
        Start Quiz
      </button>
    </div>
  </div>
</div>